
{% extends "base.html" %}

{% block title %}{{ navigation.contact }} - BaiMuras{% endblock %}
{% block description %}Свяжитесь с BaiMuras для консультации по мебели Монтессори, кухням на заказ и детским комнатам.{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero section-sm">
    <div class="container">
        <div class="text-center fade-in">
            <h1>{{ form_content.title }}</h1>
            <p class="lead">{{ form_content.subtitle }}</p>
        </div>
    </div>
</section>

<!-- Contact Form Section -->
<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card fade-in">
                    <div class="card-body p-5">
                        <form method="POST" action="{{ url_for('main.contact') }}" data-ajax="true">
                            {{ csrf_token() }}
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="name" class="form-label">{{ form_content.name_label }} *</label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="name" 
                                               name="name" 
                                               placeholder="{{ form_content.name_placeholder }}" 
                                               required>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="phone" class="form-label">{{ form_content.phone_label }} *</label>
                                        <input type="tel" 
                                               class="form-control" 
                                               id="phone" 
                                               name="phone" 
                                               placeholder="{{ form_content.phone_placeholder }}" 
                                               required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="email" class="form-label">{{ form_content.email_label }}</label>
                                        <input type="email" 
                                               class="form-control" 
                                               id="email" 
                                               name="email" 
                                               placeholder="{{ form_content.email_placeholder }}">
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="service_type" class="form-label">{{ form_content.service_label }} *</label>
                                        <select class="form-control" id="service_type" name="service_type" required>
                                            <option value="">{% if current_language == 'ky' %}Тандаңыз{% else %}Выберите услугу{% endif %}</option>
                                            {% for key, value in form_content.service_options.items() %}
                                            <option value="{{ key }}">{{ value }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="message" class="form-label">{{ form_content.message_label }} *</label>
                                <textarea class="form-control" 
                                          id="message" 
                                          name="message" 
                                          rows="5" 
                                          placeholder="{{ form_content.message_placeholder }}" 
                                          required></textarea>
                            </div>
                            
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-paper-plane me-2"></i>{{ form_content.submit_button }}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Info Section -->
<section class="section" style="background-color: var(--light-gray);">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 text-center mb-4 fade-in">
                <div class="service-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <h4>{% if current_language == 'ky' %}Телефон{% else %}Телефон{% endif %}</h4>
                <p>{{ footer_content.phone }}</p>
            </div>
            
            <div class="col-lg-4 text-center mb-4 fade-in">
                <div class="service-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <h4>Email</h4>
                <p>{{ footer_content.email }}</p>
            </div>
            
            <div class="col-lg-4 text-center mb-4 fade-in">
                <div class="service-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <h4>{% if current_language == 'ky' %}Дарек{% else %}Адрес{% endif %}</h4>
                <p>{{ footer_content.address }}</p>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="section">
    <div class="container">
        <div class="text-center mb-5 fade-in">
            <h2>{% if current_language == 'ky' %}Көп берилүүчү суроолор{% else %}Часто задаваемые вопросы{% endif %}</h2>
        </div>
        
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="accordion fade-in">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5>{% if current_language == 'ky' %}Канча убакытта эмерек даяр болот?{% else %}Сколько времени занимает изготовление мебели?{% endif %}</h5>
                            <p>{% if current_language == 'ky' %}Адатта 2-4 жума, долбоордун татаалдыгына жараша.{% else %}Обычно 2-4 недели, в зависимости от сложности проекта.{% endif %}</p>
                        </div>
                    </div>
                    
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5>{% if current_language == 'ky' %}Кандай материалдарды колдоносуз?{% else %}Какие материалы вы используете?{% endif %}</h5>
                            <p>{% if current_language == 'ky' %}Биз E1 классындагы экологиялык ЛДСП, МДФ жана табигый жыгачты колдонобуз.{% else %}Мы используем экологичные ЛДСП, МДФ класса E1 и натуральное дерево.{% endif %}</p>
                        </div>
                    </div>
                    
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5>{% if current_language == 'ky' %}Жеткирүү кандай жүрөт?{% else %}Как происходит доставка?{% endif %}</h5>
                            <p>{% if current_language == 'ky' %}Биз Бишкек боюнча акысыз жеткирүү жана орнотуу кызматын көрсөтөбүз.{% else %}Мы предоставляем бесплатную доставку и установку по Бишкеку.{% endif %}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Form validation and submission
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form[data-ajax="true"]');
    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate form
            if (!BaiMuras.validateContactForm(this)) {
                return;
            }
            
            // Submit form
            const formData = new FormData(this);
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner"></span> {% if current_language == "ky" %}Жөнөтүлүүдө...{% else %}Отправка...{% endif %}';
            
            fetch(this.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': document.querySelector('meta[name="csrf-token"]').content
                }
            })
            .then(response => {
                if (response.ok) {
                    BaiMuras.showAlert('success', '{{ form_content.success_message }}');
                    this.reset();
                } else {
                    BaiMuras.showAlert('error', '{{ form_content.error_message }}');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                BaiMuras.showAlert('error', '{{ form_content.error_message }}');
            })
            .finally(() => {
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalText;
            });
        });
    }
});
</script>
{% endblock %}
