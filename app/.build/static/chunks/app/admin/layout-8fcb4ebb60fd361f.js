(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{74052:function(e,t,n){Promise.resolve().then(n.bind(n,93851))},93851:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var r=n(15444),s=n(89300),i=n(41084),l=n(79047),a=n(59335),d=n(12817),o=n(71384),c=n(64624),u=n(29757),x=n(54907),f=n(89929),m=n(75012),g=n(16629),h=n(26378),b=n(6488),v=n(33485),p=n(78503),j=n(4693),y=n(63751),N=n(97480),w=n(65522),z=n(75762);let k=[{title:"Дашборд",href:"/admin",icon:o.Z},{title:"CRM",href:"/admin/crm",icon:c.Z},{title:"Проекты",href:"/admin/projects",icon:u.Z},{title:"Заказы",href:"/admin/orders",icon:x.Z},{title:"Сметы",href:"/admin/estimates",icon:f.Z},{title:"Календарь",href:"/admin/calendar",icon:m.Z},{title:"Материалы",href:"/admin/materials",icon:g.Z},{title:"Отчеты",href:"/admin/reports",icon:h.Z},{title:"Настройки",href:"/admin/settings",icon:b.Z}];function Z(e){var t,n,o;let{className:c}=e,[u,x]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!1),g=(0,l.usePathname)(),{data:h}=(0,z.useSession)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.M,{children:u&&(0,r.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>x(!1)})}),(0,r.jsx)("button",{onClick:()=>x(!u),className:"fixed top-4 left-4 z-50 p-2 bg-slate-800 text-white rounded-lg lg:hidden",children:u?(0,r.jsx)(v.Z,{size:20}):(0,r.jsx)(p.Z,{size:20})}),(0,r.jsx)(d.E.aside,{initial:!1,animate:{x:u?0:"-100%"},className:(0,w.cn)("fixed left-0 top-0 z-40 h-full w-72 bg-slate-900 shadow-lg lg:translate-x-0 lg:static lg:z-auto",c),children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-teal-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"BM"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-white font-semibold text-lg",children:"BaiMuras"}),(0,r.jsx)("p",{className:"text-slate-400 text-xs",children:"Админ панель"})]})]})}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:k.map(e=>{let t=e.icon,n=g===e.href||"/admin"!==e.href&&g.startsWith(e.href);return(0,r.jsxs)(i.default,{href:e.href,onClick:()=>x(!1),className:(0,w.cn)("flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",n?"bg-teal-500 text-white shadow-lg":"text-slate-300 hover:bg-slate-800 hover:text-white"),children:[(0,r.jsx)(t,{size:18}),(0,r.jsx)("span",{children:e.title})]},e.href)})}),(0,r.jsx)("div",{className:"p-4 border-t border-slate-700",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>m(!f),className:"flex items-center justify-between w-full p-3 text-slate-300 hover:bg-slate-800 rounded-lg transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-slate-600 rounded-full flex items-center justify-center",children:(0,r.jsx)(j.Z,{size:16})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:(null==h?void 0:null===(t=h.user)||void 0===t?void 0:t.name)||(null==h?void 0:null===(n=h.user)||void 0===n?void 0:n.username)}),(0,r.jsx)("div",{className:"text-xs text-slate-400",children:null==h?void 0:null===(o=h.user)||void 0===o?void 0:o.email})]})]}),(0,r.jsx)(y.Z,{size:16,className:(0,w.cn)("transition-transform duration-200",f&&"rotate-180")})]}),(0,r.jsx)(a.M,{children:f&&(0,r.jsx)(d.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute bottom-full left-0 w-full mb-2 bg-slate-800 rounded-lg shadow-lg border border-slate-700",children:(0,r.jsxs)("button",{onClick:()=>{(0,z.signOut)({callbackUrl:"/auth/signin"})},className:"flex items-center space-x-3 w-full p-3 text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[(0,r.jsx)(N.Z,{size:16}),(0,r.jsx)("span",{className:"text-sm",children:"Выйти"})]})})})]})})]})})]})}var _=n(25076),C=n(29046),E=n(74678),I=n(2422);function R(){var e,t,n,s,i,l,a;let{data:d}=(0,z.useSession)();return(0,r.jsx)("header",{className:"bg-white border-b border-slate-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4 flex-1",children:(0,r.jsxs)("div",{className:"relative max-w-md flex-1",children:[(0,r.jsx)(_.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),(0,r.jsx)(E.I,{placeholder:"Поиск заказов, проектов, клиентов...",className:"pl-10 bg-slate-50 border-slate-200"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(I.z,{variant:"ghost",size:"sm",className:"relative",children:[(0,r.jsx)(C.Z,{size:20}),(0,r.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-slate-900",children:(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.name)||(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.username)}),(0,r.jsx)("div",{className:"text-xs text-slate-500",children:(null==d?void 0:null===(i=d.user)||void 0===i?void 0:null===(s=i.roles)||void 0===s?void 0:null===(n=s[0])||void 0===n?void 0:n.name)||"Пользователь"})]}),(0,r.jsx)("div",{className:"w-8 h-8 bg-teal-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:((null==d?void 0:null===(l=d.user)||void 0===l?void 0:l.name)||(null==d?void 0:null===(a=d.user)||void 0===a?void 0:a.username)||"U").charAt(0).toUpperCase()})})]})]})]})})}function S(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"flex h-screen bg-slate-50",children:[(0,r.jsx)(Z,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-0",children:[(0,r.jsx)(R,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"p-6",children:t})})]})]})}function U(e){let{children:t}=e;return(0,r.jsx)(S,{children:t})}},2422:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(15444),s=n(89300),i=n(21030),l=n(2371),a=n(65522);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:n,variant:s,size:l,asChild:o=!1,...c}=e,u=o?i.g7:"button";return(0,r.jsx)(u,{className:(0,a.cn)(d({variant:s,size:l,className:n})),ref:t,...c})});o.displayName="Button"},74678:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(15444),s=n(89300),i=n(65522);let l=s.forwardRef((e,t)=>{let{className:n,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...l})});l.displayName="Input"},65522:function(e,t,n){"use strict";n.d(t,{SL:function(){return c},cn:function(){return i},o0:function(){return d},p6:function(){return a},xG:function(){return l},z2:function(){return o}});var r=n(32191),s=n(23607);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}function l(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"KGS",minimumFractionDigits:0}).format(e)}function a(e){let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric"}).format(t)}function d(e){let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function o(e){return({new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-purple-100 text-purple-800",converted:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800",planning:"bg-blue-100 text-blue-800",in_progress:"bg-amber-100 text-amber-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",pending:"bg-gray-100 text-gray-800",confirmed:"bg-blue-100 text-blue-800",in_production:"bg-yellow-100 text-yellow-800",ready:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-orange-100 text-orange-800",scheduled:"bg-blue-100 text-blue-800",rescheduled:"bg-yellow-100 text-yellow-800",draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800"}function c(e){return({new:"Новый",contacted:"Связались",qualified:"Квалифицирован",converted:"Конвертирован",lost:"Потерян",planning:"Планирование",in_progress:"В работе",completed:"Завершен",cancelled:"Отменен",pending:"Ожидает",confirmed:"Подтвержден",in_production:"В производстве",ready:"Готов",delivered:"Доставлен",failed:"Неудачно",refunded:"Возврат",scheduled:"Запланирован",rescheduled:"Перенесен",draft:"Черновик",sent:"Отправлен",approved:"Одобрен",rejected:"Отклонен",expired:"Истек"})[e]||e}}},function(e){e.O(0,[162,817,762,133,386,156,744],function(){return e(e.s=74052)}),_N_E=e.O()}]);